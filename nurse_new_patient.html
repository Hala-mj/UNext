<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Patient</title>
    <link rel="stylesheet" href="styles.css">

    <style>
        * {
            box-sizing: border-box;
        }

        html,
        body {
            width: 100%;
            height: 100%;
        }

        body {
            background-color: #FF6153;
            overflow: hidden;
        }

        .main {
            width: 1500px;
            min-height: 100vw;
            height: 1000px;
            min-height: 100vh;
            position: relative;
            top: 50%;
            left: 50%;
            transform: translate3d(-50%, -50%, 0);
        }

        .section_wave {
            width: 100%;
            height: 100%;
            transform: rotate(-45deg);
        }

        .dash {
            stroke-dasharray: 700;
            animation: dash 15s linear infinite;
            stroke: #FBC02E;
        }

        .dash_0 { animation-delay: 0s; }
        .dash_1 { transform: translateY(100px); animation-delay: 2.5s; }
        .dash_2 { transform: translateY(200px); animation-delay: 6s; }
        .dash_3 { transform: translateY(300px); animation-delay: 4s; }
        .dash_4 { transform: translateY(400px); animation-delay: 1s; }
        .dash_5 { transform: translateY(500px); animation-delay: 5s; }
        .dash_6 { transform: translateY(600px); animation-delay: 3s; }
        .dash_7 { transform: translateY(700px); animation-delay: 1.5s; }
        .dash_8 { transform: translateY(800px); animation-delay: 5.5s; }
        .dash_9 { transform: translateY(900px); animation-delay: 1s; }

        @keyframes dash {
            0% { stroke-dashoffset: 10; stroke: #FBC02E; }
            50% { stroke: #19D8FF; }
            100% { stroke-dashoffset: 9800; stroke: #FBC02E; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Enter your information to get in line</h1>
        <form id="newPatientForm">
            <input type="text" id="patientName" placeholder="Name" required />
            <input type="text" id="patientMRN" placeholder="MRN" required />
            <input type="text" id="patientPhone" placeholder="Phone number" required />
            <button type="submit">Submit</button>
        </form>
    </div>

    <main class="main">
        <section class="section section_wave">
            <svg width="100%" height="100%" viewBox="0 0 1500 1000" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
                    <path class="dash dash_0" d="M16,16 C76.235,16 77.932,77 138.167,77 C198.402,77 198.402,16 260.333,16 C320.568,16 322.265,77 382.5,77 C442.735,77 442.735,16 504.667,16 C564.902,16 566.598,77 626.833,77 C687.068,77 687.068,16 749,16 C809.235,16 810.932,77 871.167,77 C931.402,77 931.402,16 993.333,16 C1053.568,16 1055.265,77 1115.5,77 C1175.735,77 1175.735,16 1237.667,16 C1297.902,16 1299.598,77 1359.833,77 C1420.068,77 1420.068,16 1482,16" stroke-width="32"></path>
                    <path class="dash dash_1" d="M16,16 C76.235,16 77.932,77 138.167,77 C198.402,77 198.402,16 260.333,16 C320.568,16 322.265,77 382.5,77 C442.735,77 442.735,16 504.667,16 C564.902,16 566.598,77 626.833,77 C687.068,77 687.068,16 749,16 C809.235,16 810.932,77 871.167,77 C931.402,77 931.402,16 993.333,16 C1053.568,16 1055.265,77 1115.5,77 C1175.735,77 1175.735,16 1237.667,16 C1297.902,16 1299.598,77 1359.833,77 C1420.068,77 1420.068,16 1482,16" stroke-width="32"></path>
                    <path class="dash dash_2" d="M16,16 C76.235,16 77.932,77 138.167,77 C198.402,77 198.402,16 260.333,16 C320.568,16 322.265,77 382.5,77 C442.735,77 442.735,16 504.667,16 C564.902,16 566.598,77 626.833,77 C687.068,77 687.068,16 749,16 C809.235,16 810.932,77 871.167,77 C931.402,77 931.402,16 993.333,16 C1053.568,16 1055.265,77 1115.5,77 C1175.735,77 1175.735,16 1237.667,16 C1297.902,16 1299.598,77 1359.833,77 C1420.068,77 1420.068,16 1482,16" stroke-width="32"></path>
                    <path class="dash dash_3" d="M16,16 C76.235,16 77.932,77 138.167,77 C198.402,77 198.402,16 260.333,16 C320.568,16 322.265,77 382.5,77 C442.735,77 442.735,16 504.667,16 C564.902,16 566.598,77 626.833,77 C687.068,77 687.068,16 749,16 C809.235,16 810.932,77 871.167,77 C931.402,77 931.402,16 993.333,16 C1053.568,16 1055.265,77 1115.5,77 C1175.735,77 1175.735,16 1237.667,16 C1297.902,16 1299.598,77 1359.833,77 C1420.068,77 1420.068,16 1482,16" stroke-width="32"></path>
                    <path class="dash dash_4" d="M16,16 C76.235,16 77.932,77 138.167,77 C198.402,77 198.402,16 260.333,16 C320.568,16 322.265,77 382.5,77 C442.735,77 442.735,16 504.667,16 C564.902,16 566.598,77 626.833,77 C687.068,77 687.068,16 749,16 C809.235,16 810.932,77 871.167,77 C931.402,77 931.402,16 993.333,16 C1053.568,16 1055.265,77 1115.5,77 C1175.735,77 1175.735,16 1237.667,16 C1297.902,16 1299.598,77 1359.833,77 C1420.068,77 1420.068,16 1482,16" stroke-width="32"></path>
                    <path class="dash dash_5" d="M16,16 C76.235,16 77.932,77 138.167,77 C198.402,77 198.402,16 260.333,16 C320.568,16 322.265,77 382.5,77 C442.735,77 442.735,16 504.667,16 C564.902,16 566.598,77 626.833,77 C687.068,77 687.068,16 749,16 C809.235,16 810.932,77 871.167,77 C931.402,77 931.402,16 993.333,16 C1053.568,16 1055.265,77 1115.5,77 C1175.735,77 1175.735,16 1237.667,16 C1297.902,16 1299.598,77 1359.833,77 C1420.068,77 1420.068,16 1482,16" stroke-width="32"></path>
                    <path class="dash dash_6" d="M16,16 C76.235,16 77.932,77 138.167,77 C198.402,77 198.402,16 260.333,16 C320.568,16 322.265,77 382.5,77 C442.735,77 442.735,16 504.667,16 C564.902,16 566.598,77 626.833,77 C687.068,77 687.068,16 749,16 C809.235,16 810.932,77 871.167,77 C931.402,77 931.402,16 993.333,16 C1053.568,16 1055.265,77 1115.5,77 C1175.735,77 1175.735,16 1237.667,16 C1297.902,16 1299.598,77 1359.833,77 C1420.068,77 1420.068,16 1482,16" stroke-width="32"></path>
                    <path class="dash dash_7" d="M16,16 C76.235,16 77.932,77 138.167,77 C198.402,77 198.402,16 260.333,16 C320.568,16 322.265,77 382.5,77 C442.735,77 442.735,16 504.667,16 C564.902,16 566.598,77 626.833,77 C687.068,77 687.068,16 749,16 C809.235,16 810.932,77 871.167,77 C931.402,77 931.402,16 993.333,16 C1053.568,16 1055.265,77 1115.5,77 C1175.735,77 1175.735,16 1237.667,16 C1297.902,16 1299.598,77 1359.833,77 C1420.068,77 1420.068,16 1482,16" stroke-width="32"></path>
                    <path class="dash dash_8" d="M16,16 C76.235,16 77.932,77 138.167,77 C198.402,77 198.402,16 260.333,16 C320.568,16 322.265,77 382.5,77 C442.735,77 442.735,16 504.667,16 C564.902,16 566.598,77 626.833,77 C687.068,77 687.068,16 749,16 C809.235,16 810.932,77 871.167,77 C931.402,77 931.402,16 993.333,16 C1053.568,16 1055.265,77 1115.5,77 C1175.735,77 1175.735,16 1237.667,16 C1297.902,16 1299.598,77 1359.833,77 C1420.068,77 1420.068,16 1482,16" stroke-width="32"></path>
                    <path class="dash dash_9" d="M16,16 C76.235,16 77.932,77 138.167,77 C198.402,77 198.402,16 260.333,16 C320.568,16 322.265,77 382.5,77 C442.735,77 442.735,16 504.667,16 C564.902,16 566.598,77 626.833,77 C687.068,77 687.068,16 749,16 C809.235,16 810.932,77 871.167,77 C931.402,77 931.402,16 993.333,16 C1053.568,16 1055.265,77 1115.5,77 C1175.735,77 1175.735,16 1237.667,16 C1297.902,16 1299.598,77 1359.833,77 C1420.068,77 1420.068,16 1482,16" stroke-width="32"></path>
                </g>
            </svg>
        </section>
    </main>

    <script>
        document.getElementById('newPatientForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            const name = document.getElementById('patientName').value;
            const mrn = document.getElementById('patientMRN').value;
            const phone = document.getElementById('patientPhone').value;

            // Check if MRN is a number
            if (isNaN(mrn)) {
                alert('Enter a valid MRN please');
                return;
            }

            // Validate phone number format (simple regex for demonstration, adjust as needed)
            const phonePattern = /^[0-9]{10}$/;
            if (!phonePattern.test(phone)) {
                alert('Phone number must be a 10-digit number');
                return;
            }

            const patients = JSON.parse(localStorage.getItem('patients')) || [];

            // Check if MRN is unique
            if (patients.some(patient => patient.mrn === mrn)) {
                alert('Patient already in line');
                return;
            }

            // Check if phone number is unique
            if (patients.some(patient => patient.phone === phone)) {
                alert('Phone number must be unique');
                return;
            }

            const newPatient = { name, mrn, phone, serialNumber: patients.length + 1 };
            patients.push(newPatient);
            localStorage.setItem('patients', JSON.stringify(patients));
            
            // Redirect to user_queue_wait.html
            window.location.href = `user_queue_wait.html?serialNumber=${newPatient.serialNumber}`;
        });
    </script>
</body>
</html>
